sudo: false
language: node_js
node_js:
- node
addons:
  apt:
    sources:
    - ubuntu-toolchain-r-test
    packages:
    - g++-4.8
    - gcc-4.8-multilib
    - g++-4.8-multilib
    - gcc-multilib
    - g++-multilib
    - libasound2-dev
os:
- osx
- linux
before_deploy:
- ARCHIVE_NAME="${TRAVIS_TAG:-latest}-$TRAVIS_OS_NAME-`uname -m`.tar"
- npm run prebuild
- if [[ "$TRAVIS_OS_NAME" == "linux" ]]; then ARCH=ia32 npm run prebuild; fi
- tar --create --verbose --file="$ARCHIVE_NAME" --directory "$TRAVIS_BUILD_DIR/prebuilds"
  .
deploy:
  provider: releases
  draft: false
  prerelease: true
  file: "$ARCHIVE_NAME"
  skip_cleanup: true
  on:
    tags: true
    node: node
  api_key:
    secure: bOgLEXcfAOKvxuvulcJkhKUfNj997Xg6YpaOWqzuX/yHbTlFRndjllXl8d9PAO86jRsBvHIOHwD4PaVyP/ifB9KXzaIFOkbifU4dcMa2Le6Mc4Fpwhd8v1THFd0yiU1mNuBzLuHlo7fypwBhUsLiIb5aB3VdHc1rBi+CKV6dtNdB4WrH0t+uaghtce22XUQc2nnDW/o6Yfy/RaQqJOOOiTQZsRdU1EUQ7Le06nEx4hXsLjaolSNUEQ7dJU4f0fpCevPieo10dDRH+8sV+0uUO5Z93fCq3Q6qPB73e5XDzGmR3v0pKUbNvO6MSqlZtyPZ1IAmVXbSSLv3eRzaFV6GXpY+t1c6PwGNE06M0GefTnotlBGpmG53JKxQBPqoybhy5o+40Bnr7sps1CmQwDhtFLEhG9fQkIOoDcsDcRj4GlGeaELKxtdZBtg9Ek7XpylgQazGF3bKeMB2osECRlLXDkIiKx1ikaTFR8tB5ojrTuC9xXR49jNvyhVQ44Z3AFm95KszSEsRcY6xBhrqqhgXCDdu+8DC5OX052J/TJX+BKa10iggnxM/zjQFpgPKzOiD7/6P7juPjeJKEHxugNAHNNJcYh/JZdHkUG9ULYnXfnAc1gHQOUcrHoRnFbOW0NAePLoFlNzp9EBMLb3A/sjFn+GBZdItZ+b88ljUPBkMvgk=
